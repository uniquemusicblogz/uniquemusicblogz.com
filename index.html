<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unique Music Blog | Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900;display=swap" rel="stylesheet">
    <!-- Load Font Awesome for Social Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Dynamic SEO/Open Graph Meta Tags - Will be updated by JavaScript -->
    <meta property="og:title" content="Unique Music Blog">
    <meta property="og:description" content="The best new music, albums, and free downloads.">
    <meta property="og:image" content="https://placehold.co/1200x630/222/ef4444?text=Unique+Music+Blog">
    <meta property="og:url" content="https://example.com">
    <meta property="og:type" content="website">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
        }
        .view {
            display: none;
        }
        .view.active {
            display: block;
        }
        .nav-link.active {
            color: #EF4444;
            border-bottom: 2px solid #EF4444;
        }
        .content-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            cursor: pointer;
        }
        .content-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.15);
        }
        .social-btn {
            @apply inline-flex items-center justify-center p-3 rounded-full text-white transition-colors shadow-md;
            width: 48px;
            height: 48px;
        }
        .social-btn:hover {
            opacity: 0.8;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <header class="sticky top-0 z-50 bg-gray-900 shadow-lg">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <a href="#/" class="text-xl sm:text-2xl font-black text-white nav-link tracking-wide" data-view="home-view">
                        <span class="text-red-500">Unique</span> Music Blog
                    </a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#/" class="nav-link text-gray-300 hover:text-red-500 px-3 py-2 rounded-md text-sm font-medium" data-view="home-view">Home</a>
                        <a href="#/albums/" class="nav-link text-gray-300 hover:text-red-500 px-3 py-2 rounded-md text-sm font-medium" data-view="albums-view">Albums</a>
                        <a href="#/videos/" class="nav-link text-gray-300 hover:text-red-500 px-3 py-2 rounded-md text-sm font-medium" data-view="videos-view">Videos</a>
                        <a href="#/downloads/" class="nav-link text-gray-300 hover:text-red-500 px-3 py-2 rounded-md text-sm font-medium" data-view="downloads-view">Downloads</a>
                        <a href="#/about/" class="nav-link text-gray-300 hover:text-red-500 px-3 py-2 rounded-md text-sm font-medium" data-view="about-view">About</a>
                    </div>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button type="button" id="mobile-menu-button" class="bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
        </nav>

        <div class="md:hidden hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#/" class="nav-link text-gray-300 hover:text-red-500 block px-3 py-2 rounded-md text-base font-medium" data-view="home-view">Home</a>
                <a href="#/albums/" class="nav-link text-gray-300 hover:text-red-500 block px-3 py-2 rounded-md text-base font-medium" data-view="albums-view">Albums</a>
                <a href="#/videos/" class="nav-link text-gray-300 hover:text-red-500 block px-3 py-2 rounded-md text-base font-medium" data-view="videos-view">Videos</a>
                <a href="#/downloads/" class="nav-link text-gray-300 hover:text-red-500 block px-3 py-2 rounded-md text-base font-medium" data-view="downloads-view">Downloads</a>
                <a href="#/about/" class="nav-link text-gray-300 hover:text-red-500 block px-3 py-2 rounded-md text-base font-medium" data-view="about-view">About</a>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full flex-grow">
        <div class="flex flex-col md:flex-row-reverse gap-8">
            
            <aside class="w-full md:w-1/4 space-y-8 md:sticky md:top-24 h-full">
                <div class="bg-gray-800 p-4 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 border-b border-gray-700 pb-2">Search Site</h3>
                    <input type="search" id="search-bar" placeholder="Search across all content..." class="w-full px-3 py-2 bg-gray-700 text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500">
                </div>

                <div class="bg-gray-800 p-4 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 border-b border-gray-700 pb-2">Top Categories</h3>
                    <ul class="space-y-3">
                        <li><a href="#/albums/" class="nav-link hover:text-red-500 transition-colors" data-view="albums-view">Full Album Downloads</a></li>
                        <li><a href="#/videos/" class="nav-link hover:text-red-500 transition-colors" data-view="videos-view">Videos</a></li>
                        <li><a href="#/downloads/" class="nav-link hover:text-red-500 transition-colors" data-view="downloads-view">Free Downloads (Singles)</a></li>
                    </ul>
                </div>
            </aside>

            <main class="w-full md:w-3/4 space-y-8">
                
                <div id="home-view" class="view space-y-8">
                    <h2 class="text-3xl font-bold mb-1">Latest & Featured</h2>
                    <p class="text-gray-400 mb-4">The newest music and the stories behind the artists.</p>
                    <div id="home-content-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    </div>
                </div>

                <!-- Albums View -->
                <div id="albums-view" class="view space-y-8">
                    <h2 class="text-3xl font-bold mb-1">Free Album Downloads</h2>
                    <p class="text-gray-400 mb-4">Discover complete albums and EPs available for direct, easy download in one ZIP file.</p>
                    <div id="albums-content-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    </div>
                </div>
                
                <div id="videos-view" class="view space-y-8">
                    <h2 class="text-3xl font-bold mb-1">Music Videos & Live Footage</h2>
                    <p class="text-gray-400 mb-4">Watch the latest official music videos and exclusive live performance footage.</p>
                    <div id="videos-content-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    </div>
                </div>

                <div id="downloads-view" class="view space-y-8">
                    <h2 class="text-3xl font-bold mb-1">Free MP3 Downloads (Singles)</h2>
                    <p class="text-gray-400 mb-4">New music from the hottest local and international talent, available for free download.</p>
                    <div id="downloads-content-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    </div>
                </div>

                <!-- Search Results View -->
                <div id="search-results-view" class="view space-y-8">
                    <h2 class="text-3xl font-bold mb-1">Search Results for: "<span id="search-query-display" class="text-red-500"></span>"</h2>
                    <p id="search-count-display" class="text-gray-400 mb-4"></p>
                    <div id="search-content-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Filtered cards will be rendered here -->
                    </div>
                </div>
                <!-- END: Search Results View -->

                <div id="about-view" class="view space-y-4">
                    <h2 class="text-3xl font-bold mb-4">About Unique Music Blog</h2>
                    <div class="bg-gray-800 p-6 rounded-lg shadow-lg space-y-4 text-gray-300 leading-relaxed">
                        <p>Welcome to Unique Music Blog, your new home for music discovery. We are a passionate collective of writers, musicians, and fans dedicated to uncovering the best new music and sharing the stories behind it.</p>
                        <p>Our mission is simple: to champion the artists we believe in. Whether it's through an in-depth album download, an exclusive feature, or a free single, we strive to provide thoughtful, engaging, and authentic content.</p>
                    </div>
                </div>

                <div id="detail-view" class="view space-y-6">
                    <button id="back-button" class="inline-flex items-center px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition-colors shadow-lg">
                        &larr; Back
                    </button>
                    <div id="content-display-container" class="bg-gray-800 rounded-lg shadow-lg overflow-hidden">
                        
                    </div>
                </div>

            </main>
        </div>
    </div>

    <footer class="bg-gray-900 text-gray-500 py-8 mt-12 border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2025 Unique Music Blog. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // --- Data Definitions ---
        const FLORENCE_BIO = 'Florence + The Machine is the stage name of English musician Florence Welch. Known for her dramatic, elaborate, and often gothic style of indie rock, her music frequently incorporates themes of mythology, literature, and romance. Her latest work, "Celestial Ground," is considered her most vulnerable and orchestrally ambitious project to date.';
        
        const contentData = [
            // --- Standalone Song Content ---
            {
                id: 101,
                type: 'song',
                title: 'To Be A Man',
                slug: 'dax-to-be-a-man-mp3-download',
                artist: 'Dax',
                category: 'DOWNLOADS',
                date: 'Nov 15, 2025',
                excerpt: '“To Be A Man” delves into the complexities of masculinity and the pressure society places on individuals to conform to traditional gender roles. Dax fearlessly tackles this topic, unearthing the struggles and expectations that men face in their quest to be seen as strong and capable. Through his introspective and emotive lyrics, he challenges societal norms and opens up a conversation about the importance of emotional vulnerability.',
                imageUrl: 'https://picsum.photos/seed/snoopjay1/600/300', 
                downloadLink: 'https://od.lk/d/NTBfMzQ1NzA0MDZf/Phyzo%20the%20Producer%20-%20Final%20Selection%20Cypher%20Mp3.mp3', 
                audioUrl: 'https://od.lk/s/NTBfMzQ1NzA0MDZf/Phyzo%20the%20Producer%20-%20Final%20Selection%20Cypher%20Mp3.mp3', 
                artistBio: 'Dax, whose real name is Daniel Nwosu Jr., is a Nigerian-Canadian rapper born on March 22, 1994. He is known for his introspective lyrics and energetic performances, with a career path that includes transitioning from a college basketball player to a viral music sensation. His music often explores themes of struggle, resilience, and identity.'
            },
            {
                id: 102,
                type: 'song',
                title: 'Paint The Town Red',
                slug: 'doja_cat_paint_the_town_red.mp3',
                artist: 'Doja Cat',
                category: 'DOWNLOADS',
                date: 'Nov 12, 2025',
                excerpt: '"Paint the Town Red" is a song by Doja Cat released as the lead single from her 2023 album Scarlet. The lyrics feature her dismissing critics, asserting her independence, and celebrating her own happiness, often using provocative or defiant language. The song samples Dionne Warwick's 1964 track "Walk on By" and is a notable example of Doja Cat's distinctive musical style, which blends R&B vocals with rap and a confident attitude.',
                imageUrl: 'https://picsum.photos/seed/florence/600/300',
                downloadLink: 'https://od.lk/d/NTBfMzQ1NzA0MTFf/doja_cat_paint_the_town_red_clean_lyrics_mp3_55154.mp3',
                audioUrl: 'https://od.lk/s/NTBfMzQ1NzA0MTFf/doja_cat_paint_the_town_red_clean_lyrics_mp3_55154.mp3',
artistBio: `Doja Cat (born Amala Ratna Zandile Dlamini on October 21, 1995) is an American rapper, singer, and songwriter who has become one of the defining and most versatile pop stars of her generation. Renowned for her witty lyricism, genre-blending sound (which includes hip-hop pop and R&B), and compelling visual presence, she is a dominant force in modern music and internet culture.

  Doja Cat began making music on SoundCloud as a teenager in Los Angeles, eventually signing a joint record deal with Kemosabe and RCA Records at age 17. While her early releases gained some attention, she earned viral fame in 2018 with the novelty song "Mooo!" which showcased her unique humor and internet-savvy persona. This online success served as a launchpad for her mainstream breakthrough.`
},
            // --- Album Track Content (New for routing/detail view) ---
            {
                id: 201, 
                type: 'song',
                title: 'Florence + The Machine - Heaven is Waiting',
                slug: 'florence-heaven-is-waiting',
                artist: 'Florence + The Machine',
                category: 'ALBUM TRACK',
                date: 'Nov 12, 2025',
                excerpt: 'The haunting opener to the "Celestial Ground" album, now available for individual download.',
                imageUrl: 'https://picsum.photos/seed/florence/600/300', 
                downloadLink: 'https://example.com/downloads/celestial_ground/01_heaven_is_waiting.mp3', 
                audioUrl: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3', // Placeholder audio
                artistBio: FLORENCE_BIO,
            },
            {
                id: 202, 
                type: 'song',
                title: 'Florence + The Machine - Cosmic Wonder',
                slug: 'florence-cosmic-wonder',
                artist: 'Florence + The Machine',
                category: 'ALBUM TRACK',
                date: 'Nov 12, 2025',
                excerpt: 'Track two from the "Celestial Ground" album, a mesmerizing blend of electronic and choral elements.',
                imageUrl: 'https://picsum.photos/seed/florence/600/300', 
                downloadLink: 'https://example.com/downloads/celestial_ground/02_cosmic_wonder.mp3', 
                audioUrl: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3',
                artistBio: FLORENCE_BIO,
            },
            {
                id: 203, 
                type: 'song',
                title: 'Florence + The Machine - Lighthouse Keeper',
                slug: 'florence-lighthouse-keeper',
                artist: 'Florence + The Machine',
                category: 'ALBUM TRACK',
                date: 'Nov 12, 2025',
                excerpt: 'The beautiful ballad, "Lighthouse Keeper," from the "Celestial Ground" album.',
                imageUrl: 'https://picsum.photos/seed/florence/600/300', 
                downloadLink: 'https://example.com/downloads/celestial_ground/03_lighthouse_keeper.mp3', 
                audioUrl: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3',
                artistBio: FLORENCE_BIO,
            },
            {
                id: 204, 
                type: 'song',
                title: 'Florence + The Machine - Grief and Renewal',
                slug: 'florence-grief-and-renewal',
                artist: 'Florence + The Machine',
                category: 'ALBUM TRACK',
                date: 'Nov 12, 2025',
                excerpt: 'An emotionally heavy track that forms the core narrative of the "Celestial Ground" album.',
                imageUrl: 'https://picsum.photos/seed/florence/600/300', 
                downloadLink: 'https://example.com/downloads/celestial_ground/04_grief_and_renewal.mp3', 
                audioUrl: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3',
                artistBio: FLORENCE_BIO,
            },
            {
                id: 205, 
                type: 'song',
                title: 'Florence + The Machine - Star Dust Hymn',
                slug: 'florence-star-dust-hymn',
                artist: 'Florence + The Machine',
                category: 'ALBUM TRACK',
                date: 'Nov 12, 2025',
                excerpt: 'The powerful, 6-minute epic "Star Dust Hymn" is a fan favorite from the new album.',
                imageUrl: 'https://picsum.photos/seed/florence/600/300', 
                downloadLink: 'https://example.com/downloads/celestial_ground/05_star_dust_hymn.mp3', 
                audioUrl: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3',
                artistBio: FLORENCE_BIO,
            },
            {
                id: 206, 
                type: 'song',
                title: 'Florence + The Machine - A New Age (Instrumental)',
                slug: 'florence-a-new-age-instrumental',
                artist: 'Florence + The Machine',
                category: 'ALBUM TRACK',
                date: 'Nov 12, 2025',
                excerpt: 'The closing instrumental track on "Celestial Ground" serves as a serene conclusion.',
                imageUrl: 'https://picsum.photos/seed/florence/600/300', 
                downloadLink: 'https://example.com/downloads/celestial_ground/06_a_new_age_instrumental.mp3', 
                audioUrl: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3',
                artistBio: FLORENCE_BIO,
            },
            
            // --- Album Content (Now references new song slugs) ---
            {
                id: 2,
                type: 'album', 
                title: 'Florence + The Machine - "Celestial Ground" (Full Album)',
                slug: 'album-florence-and-the-machine-celestial-ground',
                category: 'ALBUMS', 
                date: 'Nov 12, 2025',
                excerpt: 'Florence Welch returns with a sprawling, ambitious, and deeply personal album, now available for free download in one ZIP file.',
                content: `
                    <p>Florence Welch has never been one for subtlety. On "Celestial Ground," her fifth studio album, she leans into her maximalist tendencies more than ever. The result is a sprawling, ambitious, and breathtaking collection of songs that feel less like pop music and more like hymns for a new age.</p>
                    <p>This full album download includes 6 high-quality tracks and a digital booklet, showcasing her signature blend of baroque pop and orchestral rock.</p>
                `,
                imageUrl: 'https://picsum.photos/seed/florence/600/300',
                // Updated tracks to include the routing slug instead of direct link
                tracks: [ 
                    { title: "Heaven is Waiting", duration: "4:05", songSlug: 'florence-heaven-is-waiting' },
                    { title: "Cosmic Wonder", duration: "3:30", songSlug: 'florence-cosmic-wonder' },
                    { title: "Lighthouse Keeper", duration: "5:12", songSlug: 'florence-lighthouse-keeper' },
                    { title: "Grief and Renewal", duration: "4:40", songSlug: 'florence-grief-and-renewal' },
                    { title: "Star Dust Hymn", duration: "6:01", songSlug: 'florence-star-dust-hymn' },
                    { title: "A New Age (Instrumental)", duration: "2:55", songSlug: 'florence-a-new-age-instrumental' }
                ],
                zipDownloadLink: 'https://example.com/downloads/celestial_ground_album.zip' // Placeholder link
            },
            // --- Video Content ---
            {
                id: 3,
                type: 'video',
                title: 'Visualizer: Neon City Remix by Astra',
                slug: 'visualizer-neon-city-remix-astra',
                category: 'VIDEOS',
                date: 'Nov 10, 2025',
                excerpt: 'An immersive visual journey accompanying the latest synthwave remix.',
                imageUrl: 'https://picsum.photos/seed/visualizer/600/300', 
                videoUrl: 'https://www.youtube.com/embed/S_T1x11f62s', 
                content: '<p>Astra\'s new remix of "Neon City" demands a visual experience, and this 4K visualizer delivers. It perfectly captures the cyberpunk aesthetic of the track, blending retro visuals with modern, pulsing beats.</p>',
            },
            {
                id: 4,
                type: 'video',
                title: 'The Vinyl Kids Live in London (Full Concert)',
                slug: 'vinyl-kids-live-london-full-concert',
                category: 'VIDEOS',
                date: 'Oct 30, 2025',
                excerpt: 'Watch the full, electric performance from The Vinyl Kids\' sold-out show at the Apollo.',
                imageUrl: 'https://picsum.photos/seed/vinylkidslive/600/300', 
                videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ', 
                content: '<p>Experience the raw energy of The Vinyl Kids live on stage. This recording captures their best moments and incredible audience interaction, a must-watch for any serious fan.</p>',
            },
            
        ];

        // --- Core Application Logic (View & Routing) ---

        const navLinks = document.querySelectorAll('.nav-link');
        const views = document.querySelectorAll('.view');
        const searchBar = document.getElementById('search-bar');
        const backButton = document.getElementById('back-button');
        const contentDisplayContainer = document.getElementById('content-display-container');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuIcons = mobileMenuButton.querySelectorAll('svg');

        let currentView = 'home-view'; // The view currently displayed
        let lastPrimaryView = 'home-view'; // The last non-detail/non-search view

        // --- SEO / Metadata Functions ---
        
        const DEFAULT_TITLE = "Unique Music Blog | Home of Music Discovery";
        const DEFAULT_DESCRIPTION = "The best new music, albums, and free downloads.";
        const DEFAULT_IMAGE = "https://placehold.co/1200x630/222/ef4444?text=Unique+Music+Blog";

        function setMetadata(title, description, imageUrl, url) {
            document.title = title;

            const updateMeta = (property, content, nameAttr = false) => {
                const selector = nameAttr ? `meta[name="${property}"]` : `meta[property="${property}"]`;
                let meta = document.head.querySelector(selector);
                if (!meta) {
                    meta = document.createElement('meta');
                    if (nameAttr) {
                        meta.setAttribute('name', property);
                    } else {
                        meta.setAttribute('property', property);
                    }
                    document.head.appendChild(meta);
                }
                meta.setAttribute('content', content);
            };

            updateMeta('og:title', title);
            updateMeta('og:description', description);
            updateMeta('og:image', imageUrl);
            updateMeta('og:url', url);
            updateMeta('og:type', url.includes('/downloads/') || url.includes('/videos/') || url.includes('/album/') ? 'article' : 'website');

            updateMeta('description', description, true);
        }

        function resetMetadata() {
            const url = window.location.origin + window.location.pathname; // Base URL
            setMetadata(DEFAULT_TITLE, DEFAULT_DESCRIPTION, DEFAULT_IMAGE, url);
        }

        // --- View & Routing Logic ---

        function getPathForView(viewId) {
            switch (viewId) {
                case 'home-view': return '/';
                case 'albums-view': return '/albums/'; 
                case 'videos-view': return '/videos/';
                case 'downloads-view': return '/downloads/';
                case 'about-view': return '/about/';
                default: return '/';
            }
        }

        function showView(viewId, pushHistory = true) {
            if (['home-view', 'albums-view', 'videos-view', 'downloads-view', 'about-view'].includes(viewId)) {
                lastPrimaryView = viewId;
                currentView = viewId;
                resetMetadata(); 
            } else if (viewId === 'search-results-view' || viewId === 'detail-view') {
                currentView = viewId;
            }
            
            views.forEach(view => { view.classList.remove('active'); });
            document.getElementById(viewId).classList.add('active');

            // Update active navigation link styling
            document.querySelectorAll('.nav-link[data-view]').forEach(link => {
                const matchesCurrentView = link.dataset.view === currentView;
                const matchesLastPrimary = link.dataset.view === lastPrimaryView;

                if (matchesCurrentView || matchesLastPrimary && (currentView !== 'detail-view' && currentView !== 'search-results-view')) {
                     link.classList.add('active');
                } else if (currentView === 'detail-view' && link.dataset.view === lastPrimaryView) {
                    link.classList.add('active');
                } else if (currentView === 'search-results-view' && link.dataset.view === lastPrimaryView) {
                     link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });

            // Close mobile menu if open
            if (mobileMenu.classList.contains('hidden') === false) {
                mobileMenu.classList.add('hidden');
                mobileMenuIcons[0].classList.remove('hidden');
                mobileMenuIcons[1].classList.add('hidden');
            }
            
            window.scrollTo(0, 0);
        }

        function createContentCard(item) {
            let iconHtml = '';
            if (item.type === 'video') {
                iconHtml = '<div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-30"><i class="fas fa-play text-white text-5xl opacity-80"></i></div>';
            } else if (item.type === 'album') {
                 iconHtml = '<div class="absolute inset-0 flex items-end justify-start p-4 bg-black bg-opacity-30"><i class="fas fa-compact-disc text-white text-3xl opacity-90"></i><span class="ml-2 text-white font-bold text-lg">ALBUM</span></div>';
            }
            
            return `
                <div class="content-card bg-gray-800 rounded-lg shadow-lg overflow-hidden relative" data-content-id="${item.id}">
                    ${iconHtml}
                    <!-- Added onerror for robust image loading -->
                    <img src="${item.imageUrl}" alt="${item.title}" class="w-full h-48 object-cover" 
                        onerror="this.onerror=null; this.src='https://placehold.co/600x300/222/ef4444?text=${item.category}+IMAGE+ERROR';">
                    <div class="p-5">
                        <span class="text-red-500 text-xs font-semibold">${item.category}</span>
                        <h3 class="text-xl font-bold mt-1 mb-2">${item.title}</h3>
                        <p class="text-gray-400 text-sm">${item.excerpt}</p>
                    </div>
                </div>
            `;
        }
        
        function renderArticles(items, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = items.map(createContentCard).join('');
        }

        function renderAllContent() {
            // Render content for all primary category grids
            const homeContent = contentData.filter(i => i.category !== 'ALBUM TRACK').slice(0, 4);
            const albumsContent = contentData.filter(i => i.category === 'ALBUMS');
            const videosContent = contentData.filter(i => i.category === 'VIDEOS');
            // Only show standalone singles in the main downloads list
            const downloadsContent = contentData.filter(i => i.category === 'DOWNLOADS');

            renderArticles(homeContent, 'home-content-grid');
            renderArticles(albumsContent, 'albums-content-grid');
            renderArticles(videosContent, 'videos-content-grid');
            renderArticles(downloadsContent, 'downloads-content-grid');

            // Attach click listeners to all cards
            document.querySelectorAll('.content-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    e.preventDefault();
                    handleContentClick(parseInt(card.dataset.contentId));
                });
            });
        }
        
        function getRelatedSongs(artistName, currentId) {
            return contentData
                .filter(item => item.type === 'song' && item.artist === artistName && item.id !== currentId)
                .map(item => {
                    const hashPath = `#/downloads/${item.slug}/`;
                    return `
                        <li>
                            <a href="${hashPath}" data-content-id="${item.id}" class="related-song-link text-gray-300 hover:text-red-500 transition-colors">
                                <span class="font-semibold">${item.title.replace('(MP3 Download)', '').trim().split('-')[1] || item.title}</span>
                            </a>
                        </li>
                    `;
                }).join('');
        }

        function generateSocialShareButtons(url, title) {
            const encodedUrl = encodeURIComponent(url);
            const encodedTitle = encodeURIComponent(title);
            
            return `
                <div class="flex flex-wrap gap-4 mt-6">
                    <!-- Facebook -->
                    <a href="https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}" target="_blank" class="social-btn bg-blue-700" title="Share on Facebook">
                        <i class="fab fa-facebook-f text-xl"></i>
                    </a>
                    <!-- X (Twitter) -->
                    <a href="https://twitter.com/intent/tweet?url=${encodedUrl}&text=${encodedTitle}" target="_blank" class="social-btn bg-gray-900" title="Share on X (Twitter)">
                        <i class="fab fa-x-twitter text-xl"></i>
                    </a>
                    <!-- WhatsApp -->
                    <a href="https://wa.me/?text=${encodedTitle}%20${encodedUrl}" target="_blank" class="social-btn bg-green-500" title="Share on WhatsApp">
                        <i class="fab fa-whatsapp text-xl"></i>
                    </a>
                    <!-- LinkedIn (Placeholder for 'many more') -->
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=${encodedUrl}&title=${encodedTitle}" target="_blank" class="social-btn bg-blue-500" title="Share on LinkedIn">
                        <i class="fab fa-linkedin-in text-xl"></i>
                    </a>
                </div>
            `;
        }

        // Video Detail Rendering (Unchanged)
        function renderVideoDetail(item) {
            backButton.textContent = '← Back to Videos';
            const shareUrl = window.location.href; 
            const shareTitle = `Video: ${item.title}`;

            // SET METADATA
            setMetadata(
                `${item.title} | Videos | Unique Music Blog`,
                item.excerpt,
                item.imageUrl,
                shareUrl
            );

            return `
                <div class="p-6 md:p-10">
                    <span class="text-red-500 text-sm font-semibold">${item.category}</span>
                    <h1 class="text-4xl font-black mt-2 mb-4">${item.title}</h1>
                    <p class="text-gray-400 mb-6">Published ${item.date}</p>
                    
                    <!-- Embedded Video Player (Responsive 16:9 aspect ratio) -->
                    <div class="relative overflow-hidden w-full mb-6 rounded-lg shadow-2xl" style="padding-top: 56.25%;">
                        <iframe 
                            class="absolute top-0 left-0 w-full h-full" 
                            src="${item.videoUrl}" 
                            title="Embedded Video Player" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen
                            loading="lazy">
                        </iframe>
                    </div>

                    <!-- Content/Description -->
                    <div class="prose prose-invert prose-lg max-w-none text-gray-300 leading-relaxed space-y-4">
                        ${item.content}
                    </div>
                    
                    <!-- Social Share -->
                    <h2 class="text-xl font-bold mt-8 mb-4 border-t border-gray-700 pt-4">Share This Video</h2>
                    ${generateSocialShareButtons(shareUrl, shareTitle)}
                </div>
            `;
        }

        // Song Detail Rendering (Displays audio player, download button, and artist bio)
        function renderSongDetail(item) {
            // Determine the correct back button text based on whether it's an album track or a standalone single
            backButton.textContent = item.category === 'ALBUM TRACK' ? '← Back to Album' : '← Back to Downloads';
            
            // Clean up the song name for display
            const rawSongName = item.title.split('-').length > 1 ? item.title.split('-').slice(1).join('-').trim() : item.title;
            const songName = rawSongName.replace('(MP3 Download)', '').trim();
            const fileName = `${item.artist.replace(/\s/g, '_')}_${songName.replace(/\s/g, '_')}.mp3`;
            const shareUrl = window.location.href; 
            const shareTitle = `Listen & Download: ${item.title}`;

            // SET METADATA
            setMetadata(
                `${item.title} | Free Download | Unique Music Blog`,
                item.excerpt,
                item.imageUrl,
                shareUrl
            );

            return `
                <div class="grid grid-cols-1 lg:grid-cols-3">
                    <div class="lg:col-span-2 p-6 md:p-10">
                        <span class="text-red-500 text-sm font-semibold">${item.category === 'ALBUM TRACK' ? 'Album Track' : item.category} | ${item.artist}</span>
                        <h1 class="text-4xl font-black mt-2 mb-4">${songName}</h1>
                        <p class="text-gray-400 mb-6">Uploaded ${item.date}</p>
                        
                        <!-- Audio Player -->
                        <div class="bg-gray-700 p-4 rounded-lg shadow-inner mb-6">
                            <h2 class="text-xl font-semibold mb-3">Listen to "${songName}"</h2>
                            <audio controls class="w-full rounded-lg">
                                <source src="${item.audioUrl}" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                            <p class="text-gray-400 text-xs mt-2">Note: This is a demo track for preview purposes.</p>
                        </div>

                        <!-- Download Section -->
                        <div class="bg-red-500 text-gray-900 p-6 rounded-lg shadow-2xl mb-8">
                            <h2 class="text-2xl font-bold mb-3">Download "${songName}" Now!</h2>
                            <p class="mb-4 text-gray-800">Click the button below to get the free high-quality MP3 file of this single track.</p>
                            <a href="${item.downloadLink}" download="${fileName}" class="inline-block px-6 py-3 bg-gray-900 text-white font-extrabold rounded-lg hover:bg-gray-700 transition-colors uppercase tracking-wider">
                                Download MP3
                            </a>
                        </div>
                        
                        <!-- Artist Background / Bio (MOST IMPORTANT PART OF THIS REQUEST) -->
                        <h2 class="text-3xl font-bold mt-8 mb-4 border-b border-gray-700 pb-2">Artist Bio: ${item.artist}</h2>
                        <p class="text-gray-300 leading-relaxed">${item.artistBio}</p>

                        <!-- Social Share -->
                        <h2 class="text-xl font-bold mt-8 mb-4">Share This Track</h2>
                        ${generateSocialShareButtons(shareUrl, shareTitle)}
                    </div>

                    <div class="lg:col-span-1 bg-gray-700 p-6 md:p-10 lg:p-6 space-y-6">
                        <!-- Added onerror for robust image loading -->
                        <img src="${item.imageUrl}" alt="${item.title}" class="w-full object-cover rounded-lg shadow-lg" 
                            onerror="this.onerror=null; this.src='https://placehold.co/600x300/222/ef4444?text=IMAGE+ERROR';">

                        <!-- Other Songs -->
                        <h3 class="text-2xl font-bold mb-4 border-b border-gray-600 pb-2">More by ${item.artist}</h3>
                        ${getRelatedSongs(item.artist, item.id).length > 0 ? `<ul class="space-y-3">${getRelatedSongs(item.artist, item.id)}</ul>` : `<p class="text-gray-400">No other songs by this artist found yet.</p>`}
                    </div>
                </div>
            `;
        }
        
        // Album Detail Rendering 
        function renderAlbumDetail(item) {
            backButton.textContent = '← Back to Albums';
            const shareUrl = window.location.href; 
            const shareTitle = `Full Album: ${item.title}`;
            const zipFileName = `${item.title.replace(/[\W_]+/g, '-')}_Full_Album.zip`;

            // SET METADATA
            setMetadata(
                `${item.title} | Album Download | Unique Music Blog`,
                item.excerpt,
                item.imageUrl,
                shareUrl
            );
            
            // Track List HTML - Each title now links to its detail view
            const tracksHtml = item.tracks.map((track, index) => {
                const songItem = contentData.find(i => i.slug === track.songSlug);
                const hashPath = songItem ? `#/downloads/${songItem.slug}/` : '#/error/';

                return `
                    <li class="flex justify-between py-2 border-b border-gray-600 last:border-b-0 group">
                        <!-- Link to Song Detail View -->
                        <a href="${hashPath}" class="track-link text-gray-300 font-medium hover:text-red-500 transition-colors flex items-center" 
                           data-slug="${track.songSlug}">
                            <i class="fas fa-music text-red-500 text-sm mr-2 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                            ${index + 1}. ${track.title}
                        </a>
                        <span class="text-gray-400">${track.duration}</span>
                    </li>
                `;
            }).join('');

            return `
                <img src="${item.imageUrl}" alt="${item.title}" class="w-full h-96 object-cover" 
                    onerror="this.onerror=null; this.src='https://placehold.co/960x384/222/ef4444?text=ALBUM+ART+ERROR';" />
                <div class="p-6 md:p-10">
                    <span class="text-red-500 text-sm font-semibold">${item.category}</span>
                    <h1 class="text-4xl font-black mt-2 mb-4">${item.title}</h1>
                    <p class="text-gray-400 mb-6">${item.excerpt}</p>
                    
                    <div class="prose prose-invert prose-lg max-w-none text-gray-300 leading-relaxed space-y-4 mb-8">
                        ${item.content}
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Full Album Direct Download -->
                        <div class="bg-red-700 p-6 rounded-lg shadow-xl text-white flex flex-col justify-center items-center text-center order-2 lg:order-1">
                            <h2 class="text-2xl font-black mb-4 text-gray-900">Download Entire Album Now</h2>
                            <p class="mb-6 font-light text-gray-100">Get all ${item.tracks.length} tracks, plus album art, in a single high-quality ZIP file.</p>
                            
                            <!-- Direct ZIP Download Link (Full Album Option) -->
                            <a href="${item.zipDownloadLink}" download="${zipFileName}"
                                class="inline-block px-8 py-4 bg-gray-900 text-white font-extrabold rounded-lg 
                                       hover:bg-gray-700 transition-colors uppercase tracking-wider text-lg shadow-2xl">
                                <i class="fas fa-file-archive mr-3"></i> DOWNLOAD ZIP (${item.tracks.length} Songs)
                            </a>
                        </div>
                        
                        <!-- Track List - Links to Song Detail Pages -->
                        <div class="order-1 lg:order-2">
                            <h2 class="text-2xl font-bold mb-4 border-b border-gray-700 pb-2">Track Listing (View/Download Singles)</h2>
                            <p class="text-gray-400 text-sm mb-3">Click any track title to view details and download the individual song.</p>
                            <ul class="divide-y divide-gray-700">${tracksHtml}</ul>
                        </div>
                    </div>

                    <!-- Social Share -->
                    <h2 class="text-xl font-bold mt-8 mb-4 border-t border-gray-700 pt-4">Share This Album</h2>
                    ${generateSocialShareButtons(shareUrl, shareTitle)}
                </div>
            `;
        }


        function handleContentClick(contentId, pushHistory = true) {
            const item = contentData.find(i => i.id === contentId);
            if (!item) return;

            contentDisplayContainer.innerHTML = '';
            
            let path = '';

            if (item.type === 'video') {
                path = `/videos/${item.slug}/`;
                contentDisplayContainer.innerHTML = renderVideoDetail(item);
            } else if (item.type === 'song') {
                path = `/downloads/${item.slug}/`;
                contentDisplayContainer.innerHTML = renderSongDetail(item);
            } else if (item.type === 'album') { 
                path = `/albums/${item.slug}/`;
                contentDisplayContainer.innerHTML = renderAlbumDetail(item);
            } else { 
                path = `/article/${item.slug || item.id}/`;
                contentDisplayContainer.innerHTML = ''; // Blank content for unknown types
            }

            if (pushHistory) {
                const hashPath = '#' + path;
                window.location.hash = hashPath;
            }
            
            showView('detail-view', false); 

            // Re-attach listeners for dynamically generated song links (More by Artist section)
            if (item.type === 'song') {
                document.querySelectorAll('.related-song-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        window.location.hash = link.getAttribute('href'); 
                    });
                });
            }
        }

        // Global Search Handler (Unchanged)
        function handleSearch(searchTerm) {
            const trimmedTerm = searchTerm.toLowerCase().trim();

            if (trimmedTerm === '') {
                window.location.hash = getPathForView(lastPrimaryView);
                resetMetadata();
                return;
            }
            
            const results = contentData.filter(item => {
                const searchableText = `${item.title} ${item.excerpt} ${item.artist || ''} ${item.category} ${item.content || ''}`.toLowerCase();
                return searchableText.includes(trimmedTerm);
            });

            if (window.location.hash !== `#/search/${encodeURIComponent(trimmedTerm)}`) {
                 window.location.hash = `#/search/${encodeURIComponent(trimmedTerm)}`;
            }
            
            const resultsContainer = document.getElementById('search-content-grid');
            const queryDisplay = document.getElementById('search-query-display');
            const countDisplay = document.getElementById('search-count-display');
            
            queryDisplay.textContent = trimmedTerm;
            countDisplay.textContent = `${results.length} result${results.length !== 1 ? 's' : ''} found across all content.`;
            
            if (results.length > 0) {
                resultsContainer.innerHTML = results.filter(i => i.category !== 'ALBUM TRACK').map(createContentCard).join('');
                document.querySelectorAll('#search-content-grid .content-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        e.preventDefault();
                        handleContentClick(parseInt(card.dataset.contentId));
                    });
                });
            } else {
                resultsContainer.innerHTML = '<div class="md:col-span-2 text-center py-10 text-gray-400 text-lg bg-gray-700 rounded-lg">Sorry, no content matched your search query. Try another term.</div>';
            }
            
            showView('search-results-view', false); 
            
            setMetadata(
                `Search Results for "${trimmedTerm}" | Unique Music Blog`,
                `Found ${results.length} articles, videos, and songs matching the query: "${trimmedTerm}".`,
                DEFAULT_IMAGE,
                window.location.href
            );
        }

        // --- Routing and Initialization ---
        
        function routeToPath(fullHash) {
            const path = fullHash.startsWith('#') ? fullHash.substring(1) : fullHash; 
            const parts = path.split('/').filter(p => p);
            
            if (parts.length === 0 || path === '/') {
                searchBar.value = ''; 
                showView('home-view', false);
            } else if (parts[0] === 'search' && parts.length > 1) { 
                const searchTerm = decodeURIComponent(parts[1]);
                searchBar.value = searchTerm;
                handleSearch(searchTerm);
            } else if (parts[0] === 'downloads' && parts.length > 1) {
                const slug = parts[1];
                const song = contentData.find(i => i.slug === slug && i.type === 'song');
                if (song) {
                    handleContentClick(song.id, false);
                } else {
                    showView('downloads-view', false);
                }
            } else if (parts[0] === 'videos' && parts.length > 1) { 
                const slug = parts[1];
                const video = contentData.find(i => i.slug === slug && i.type === 'video');
                if (video) {
                    handleContentClick(video.id, false);
                } else {
                    showView('videos-view', false);
                }
            } else if (parts[0] === 'albums' && parts.length > 1) { 
                 const slug = parts[1];
                 const album = contentData.find(i => i.slug === slug && i.type === 'album');
                 if (album) {
                     handleContentClick(album.id, false);
                 } else {
                    showView('albums-view', false);
                 }
            } else {
                const viewId = parts[0] + '-view';
                if (document.getElementById(viewId)) {
                    searchBar.value = ''; 
                    showView(viewId, false);
                } else {
                    showView('home-view', false);
                }
            }
        }

        window.addEventListener('hashchange', () => {
            routeToPath(window.location.hash);
        });

        // --- Event Listeners and Startup ---

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const hash = link.getAttribute('href');
                window.location.hash = hash;
                searchBar.value = ''; 
            });
        });

        backButton.addEventListener('click', () => {
            // Check if we are in a song detail page that came from an album view
            const currentItem = contentData.find(i => window.location.hash.includes(i.slug) && i.type === 'song');
            if (currentItem && currentItem.category === 'ALBUM TRACK') {
                // If so, navigate back to the album page's hash directly
                const albumSlug = 'album-florence-and-the-machine-celestial-ground'; // Hardcoded for this demo album
                window.location.hash = `#/albums/${albumSlug}/`;
            } else {
                 // Otherwise, use browser history (default behavior)
                history.back(); 
            }
        });

        searchBar.addEventListener('keyup', (e) => {
            const searchTerm = searchBar.value.trim();
            if (e.key === 'Enter' || searchTerm.length > 2 || searchTerm.length === 0) {
                handleSearch(searchTerm);
            }
        });
        
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
            mobileMenuIcons[0].classList.toggle('hidden');
            mobileMenuIcons[1].classList.toggle('hidden');
        });

        // Initial application setup
        window.onload = function() {
            renderAllContent();
            resetMetadata(); 
            routeToPath(window.location.hash || '#/');
        }
    </script>
</body>
</html>






